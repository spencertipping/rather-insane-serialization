caterwaul.js_base() (caterwaul.precompiled_internal( (function( ) {null;
return(function($) {$.jquery_macro= (function(language,options) {return language.modifier( 'jquery' , (function( ) {var jquery_expand=$.jquery(options) ;
return( (function(match) {return this.expand(jquery_expand(match._expression) ) } ) ) } ) .call(this) ) } ) ;
$.jquery= (function(options) {return(function( ) {var jq=options&&options.jquery_name|| 'jQuery' ,anon=$.anonymizer( 'J' , 'TS' , 'S' , 'P' , 'PS' ) ,rule= (function(p,e) {return $.macro(anon(p) ,e.constructor===Function? (function(match) {return this.expand(e.call(this,match) ) } ) :anon(e) ) } ) ,hyphenate= (function(s) {return s.replace( /_/g , '-' ) } ) ,p= (function( ) {var p_pattern=anon( 'P[_thing]' ) ;
return( (function(node) {return p_pattern.replace( {_thing:node} ) } ) ) } ) .call(this) ,jquery_macros= [rule( 'J[_element]' , (function( ) {var dom_node_template=anon( ( '' + (jq) + '(TS[_element])' ) ) ,jquery_template=anon( ( '' + (jq) + '("<span>" + (_element) + "</span>")' ) ) ,become_dom_node= (function(match) {return dom_node_template.replace(match) } ) ,wrap_in_jquery= (function(match) {return jquery_template.replace(match) } ) ;
return( (function(match) {return match._element.is_constant() ||match._element.length?wrap_in_jquery(match) :become_dom_node(match) } ) ) } ) .call(this) ) ,rule( 'J[_element._class]' , 'J[_element].addClass(S[_class])' ) ,rule( 'J[_element *_attr(_val)]' , 'J[_element].attr(S[_attr], _val)' ) ,rule( 'J[_element *!_name(_val)]' , 'J[_element].data(S[_name], _val)' ) ,rule( 'J[_element /_method(_args)]' , 'J[_element]._method(_args)' ) ,rule( 'J[_element /!_event(_args)]' , 'J[_element].bind(S[_event], _args)' ) ,rule( 'J[_element %_function]' , '_function(J[_element])' ) ,rule( 'J[_element(_children)]' , 'J[_element].append(J[_children])' ) ,rule( 'J[_element[_children]]' , 'J[_element].append(_children)' ) ,rule( 'J[_element > _child]' , 'J[_element].append(J[_child])' ) ,rule( 'J[_element >= _child]' , 'J[_element].append(_child)' ) ,rule( 'J[_element1, _element2]' , 'J[_element1].add(J[_element2])' ) ,rule( 'J[_element1 + _element2]' , 'J[_element1].add(J[_element2])' ) ,rule( 'J[_element >> _pattern]' , 'J[_element].filter(PS[_pattern])' ) ,rule( 'J[_element >>> _pattern]' , 'J[_element].find(PS[_pattern])' ) ,rule( 'J[_element << _pattern]' , 'J[_element].parents(PS[_pattern])' ) ,rule( 'J[(_element)]' , '(J[_element])' ) ,rule( 'J[[_element]]' , '[J[_element]]' ) ,rule( 'J[+_expression]' , '_expression' ) ] ,string_macros= (function( ) {var string= (function(s) {return new $.syntax( '"' +s.replace( /\\/g , '\\\\' ) .replace( /"/g , '\\"' ) + '"' ) } ) ;
return( [rule( 'TS[_identifier]' , (function(match) {return string( ( '<' + (hyphenate(match._identifier.data) ) + '>' ) ) } ) ) ,rule( 'S[_identifier]' , (function(match) {return string(hyphenate(match._identifier.data) ) } ) ) ,rule( 'PS[_identifier]' , (function(match) {return string(this.expand(p(match._identifier) ) .data) } ) ) ] ) } ) .call(this) ,search_macros= (function( ) {var interpolated= (function(node) {return( '(' + (node.toString() ) + ').replace(/(\\)/g, "$1$1").replace(/(")/g, "\\$1")' ) } ) ,binary= (function(op) {return(function(match) {return new $.syntax( ( '' + (this.expand(p(match._element1) ) .data) + '' + (op) + '' + (this.expand(p(match._element2) ) .data) + '' ) ) } ) } ) ;
return( [rule( 'P[_element]' , (function(match) {return new $.syntax(hyphenate( (function(it) {return(it=== '_' ? '*' :it) } ) .call(this, (match._element.data) ) ) ) } ) ) ,rule( 'P[_element._class]' , (function(match) {return new $.syntax( ( '' + (this.expand(p(match._element) ) .data) + '.' + (hyphenate(match._class.data) ) + '' ) ) } ) ) ,rule( 'P[_element[_attributes]]' , (function(match) {return new $.syntax( ( '' + (this.expand(p(match._element) ) .data) + '[' + (this.expand(p(match._attributes) ) ) + ']' ) ) } ) ) ,rule( 'P[_attribute = _value]' , (function(match) {return new $.syntax( ( '' + (this.expand(p(match._attribute) ) .data) + '="#' ) + '{' +interpolated(match._value) + '}"' ) } ) ) ,rule( 'P[(_element)]' , 'P[_element]' ) ,rule( 'P[_element1 +   _element2]' ,binary( ', ' ) ) ,rule( 'P[_element1,    _element2]' ,binary( ', ' ) ) ,rule( 'P[_element1 >>  _element2]' ,binary( ' ' ) ) ,rule( 'P[_element1 >>> _element2]' ,binary( ' ' ) ) ,rule( 'P[_element1 >   _element2]' ,binary( ' > ' ) ) ,rule( 'P[_element1(_element2)]' ,binary( ' > ' ) ) ,rule( 'P[_element /_selector]' , (function(match) {return new $.syntax( ( '' + (this.expand(p(match._element) ) .data) + ':' + (hyphenate(match._selector.data) ) + '' ) ) } ) ) ,rule( 'P[_element /_selector(_value)]' , (function(match) {return new $.syntax( ( '' + (this.expand(p(match._element) ) .data) + ':' + (hyphenate(match._selector.data) ) + '("#' ) + '{' +interpolated(match._value) + '}")' ) } ) ) ] ) } ) .call(this) ;
return( (function(it) {return(it.init_function= (function(tree) {return this.macroexpand(anon( 'J[_x]' ) .replace( {_x:tree} ) ) } ) ) ,it} ) .call(this, ($.clone() .macros(jquery_macros,string_macros,search_macros) ) ) ) } ) .call(this) } ) } ) } ) .call(this) ) ) (caterwaul) ;
caterwaul.js_ui=function(existing) {var js=this.js() ;
return this.clone() .macros(existing.macros() ,this.jquery_macro(js) ) } ;
